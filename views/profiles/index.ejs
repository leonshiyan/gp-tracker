<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<main>
  <h1>Hello, <%= user?user.profile.name : "Guest" %></h1>
  
  <div class="container-md">
    <div class="container text-center">
      <div class="row">
        <div class="col">
          Column

        </div>
        <div class="col-8">
          <h1>Your Transactions</h1>
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Transaction Time</th>
                <th scope="col">Unit Price</th>
                <th scope="col">Transaction Link</th>
              </tr>
            </thead>
            <tbody>
              <% myProfile.transactions.sort(function(a,b){ return b.createdAt - a.createdAt}) %> 
              <% myProfile.transactions.forEach(transaction => { %>
                <tr>
                  <th class="align-middle" scope="row"><%= transaction.createdAt %></th>
                  <td class="align-middle">
                    <%= (transaction.amount/transaction.gasAmount).toFixed(2) %>
                  </td>
                  <td class="align-middle">
                    <button type="button" class="btn btn-primary btn-lg" onclick="window.location.href='/transactions/<%= transaction._id %>'">Here</button>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
        <div class="col">
          <span class="fs-6">Active Users</span>
          <ul class="list-group">
            <% profiles.forEach(profile => { %>
              <li class="list-group-item">
                <%= profile.name %>
              </li>
            <% }) %>
          </ul>
          
        </div>
      </div>
    </div>
    
    
</div>
</main>

<%- include('../partials/footer') %>
